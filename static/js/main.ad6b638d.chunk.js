(this["webpackJsonpvstore-web"]=this["webpackJsonpvstore-web"]||[]).push([[0],{2:function(e){e.exports=JSON.parse('{"API_TEMP_URL":"https://api.vstoremyanmar.com/consumer-api","API_URL":"http://localhost:3000/consumer-api","ROOT_PATH":"https://vs-proxy.herokuapp.com/consumer-api","KEY_DEVICE_ID":"device_id","KEY_TOKEN":"_token","KEY_USER_ID":"user_id","KEY_PROFILE":"_profile","KEY_BALANCE":"_balance","KEY_NOTIFICATION":"_unread","KEY_CACHE_STORES":"_stores","KEY_CACHE_CATALOGS":"_catalogs","KEY_CACHE_PRODUCTS":"_products","KEY_CACHE_EXPIRY":"_expiry"}')},48:function(e,t,a){},52:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var c=a(0),s=(a(48),a(49),a(16)),r=a.n(s),n=(a(50),a(52),a(1)),i=a.n(n),l=a(18),o=a.n(l),d=a(20),j=a(41),m=a(42),b=a(43),h=a(22),u=a(8),O=a(3),x=a(2),p=a(7),g=a(9),v=a(4),f=a(6),N=a.n(f);function y(){var e=Object(n.useState)(0),t=Object(O.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){var e=!1,t=window.sessionStorage.getItem(x.KEY_NOTIFICATION);return t?isNaN(parseInt(t))||!e&&s(parseInt(t)):function(){var e=x.ROOT_PATH+"/private/count-unread-notifications";return N.a.get(e)}().then((function(t){sessionStorage.setItem(x.KEY_NOTIFICATION,t.data.count),!e&&s(t.data.count)})).catch((function(e){console.log(e.response.data)})),function(){e=!0}}),[]),Object(c.jsx)("span",{className:"notification-badge badge badge-danger",children:a||""})}var w=function(e){var t=Object(g.g)();return Object(c.jsx)("nav",{className:"navbar sticky-top navbar-expand navbar-dark shadow-sm px-0 "+(e.colorClass?e.colorClass:"bg-primary"),children:Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"container d-flex justify-content-between",children:[Object(c.jsx)(v.b,{className:"navbar-brand",to:"/app",children:Object(c.jsx)("span",{className:"h4 logo-text",children:"VStore"})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:localStorage.getItem(x.KEY_TOKEN)&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("ul",{className:"navbar-nav font-weight-bold",children:[Object(c.jsx)("li",{className:"nav-item"+(e.active,""),children:Object(c.jsx)(v.b,{className:"nav-link",to:"/",children:"Home"})}),Object(c.jsx)("li",{className:"nav-item d-none d-lg-block",children:Object(c.jsx)(v.b,{className:"nav-link",to:"/epin-history",children:"E-Pin History"})}),Object(c.jsx)("li",{className:"nav-item d-none d-lg-block",children:Object(c.jsx)(v.b,{className:"nav-link",to:"/topup-history",children:"Topup History"})})]}),Object(c.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(v.b,{to:"/notifications",className:"nav-link",children:[Object(c.jsx)(p.a,{icon:["fas","bell"],size:"lg"}),Object(c.jsx)(y,{})]})}),Object(c.jsxs)("li",{className:"nav-item dropdown",children:[Object(c.jsx)(v.b,{to:"/profile",className:"nav-link d-block d-lg-none",children:Object(c.jsx)(p.a,{icon:["fas","user-circle"],size:"lg"})}),Object(c.jsx)("a",{href:"!#",className:"nav-link dropdown-toggle d-none d-lg-block",id:"navbarDropdown",role:"button","data-toggle":"dropdown",children:Object(c.jsx)(p.a,{icon:["fas","user-circle"],size:"lg"})}),Object(c.jsxs)("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown",children:[Object(c.jsx)(v.b,{className:"dropdown-item",to:"/",children:"Change Name"}),Object(c.jsx)(v.b,{className:"dropdown-item",to:"/",children:"Change Password"}),Object(c.jsx)("div",{className:"dropdown-divider"}),Object(c.jsx)("a",{className:"dropdown-item",href:"!#",onClick:function(e){e.preventDefault(),localStorage.clear(),sessionStorage.clear(),t.push("/login")},children:"Logout"})]})]})]})]})})]})})})};function S(e){return Object(c.jsx)("a",{href:e.href,className:"card-link white-link",children:Object(c.jsx)(p.a,{icon:e.icon,size:"lg"})})}var E=function(){return Object(c.jsx)("footer",{children:Object(c.jsx)("div",{className:"footer py-4",children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"d-none d-sm-block",children:Object(c.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(c.jsx)("div",{className:"text-white small",children:"Copyright \xa9 VStore 2020"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(S,{href:"https://www.facebook.com/vstoremyanmar/",icon:["fab","facebook-square"]}),Object(c.jsx)(S,{href:"/",icon:["fab","facebook-messenger"]})]})]})}),Object(c.jsxs)("div",{className:"d-block d-sm-none",children:[Object(c.jsx)("div",{className:"row mb-2",children:Object(c.jsx)("div",{className:"mx-auto small",children:Object(c.jsx)("div",{className:"text-white",children:"Copyright \xa9 VStore 2020"})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"mx-auto",children:[Object(c.jsx)(S,{href:"https://www.facebook.com/vstoremyanmar/",icon:["fab","facebook-square"]}),Object(c.jsx)(S,{href:"/",icon:["fab","facebook-messenger"]})]})})]})]})})})};var C=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{className:"display-4 mt-4",children:"Wanna be a digital store owner ?"}),Object(c.jsx)("h5",{className:"text-muted mt-3",children:"You just need 10,000 Kyats and VStore application in your mobile. Let's get started now!"})]})};var I=function(e){var t=Object(n.useState)({type:"password"}),a=Object(O.a)(t,2),s=a[0],r=a[1],i="form-control";return e.error&&e.error.length>0&&(i+=" is-invalid"),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"font-weight-bold",children:e.label}),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("input",{type:s.type,className:i,placeholder:e.placeholder,value:e.value,onChange:e.onChange,name:e.name}),Object(c.jsx)("div",{className:"input-group-append",children:Object(c.jsx)("a",{href:"!#",onClick:function(e){e.preventDefault();var t=s.type;r({type:"text"===t?"password":"text"})},className:"input-group-text",children:Object(c.jsx)(p.a,{style:{width:"24px"},icon:["fas","text"===s.type?"eye":"eye-slash"]})})}),e.error&&Object(c.jsx)("div",{className:"invalid-feedback",children:e.error})]})]})};var k=function(e){var t="form-control";return e.error&&e.error.length>0&&(t+=" is-invalid"),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"font-weight-bold",children:e.label}),Object(c.jsx)("input",{type:e.type,className:t,placeholder:e.placeholder,value:e.value,onChange:e.onChange,name:e.name}),e.error&&Object(c.jsx)("div",{className:"invalid-feedback",children:e.error})]})};var _=function(e){return Object(c.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(c.jsx)(k,{label:"Mobile",name:"mobile",type:"text",placeholder:"Your registered mobile",value:e.data.mobile,onChange:e.onChange,error:e.errors.mobile}),Object(c.jsx)(I,{label:"Password",name:"password",placeholder:"Your password",value:e.data.password,onChange:e.onChange,error:e.errors.password}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col"}),Object(c.jsx)("div",{className:"col-auto",children:Object(c.jsx)(v.b,{to:"/reset-password",className:"card-link text-primary small",children:"Forgot password?"})})]})}),Object(c.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",disabled:e.loading,children:[e.loading&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0"]}),"Sign In"]})]})};var D=a(87);function T(e,t){switch(t.type){case"loading":return{loading:!0};case"success":return{loading:!1};case"error":return{loading:!1,error:t.error};default:return e}}var A=function(e){var t=Object(n.useState)({mobile:"",password:"",token:""}),a=Object(O.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)({}),l=Object(O.a)(i,2),o=l[0],d=l[1],j=Object(n.useReducer)(T,{loading:!1}),m=Object(O.a)(j,2),b=m[0],p=m[1];return Object(n.useEffect)((function(){document.title="VStore | Login"})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row mt-2 mb-5",children:[Object(c.jsx)("div",{className:"my-4 col-lg-7 d-none d-md-none d-lg-block",children:Object(c.jsx)(C,{})}),Object(c.jsx)("div",{className:"col-md-8 col-lg-5 my-4 mx-auto",children:Object(c.jsx)("div",{className:"card shadow border-0",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"text-center mb-3 font-weight-bold font-xl",children:"Sign In"}),b.error&&Object(c.jsx)("div",{className:"text-center text-danger mb-2",children:b.error}),Object(c.jsx)(_,{data:s,onChange:function(e){var t=e.target;r(Object(u.a)(Object(u.a)({},s),{},Object(h.a)({},t.name,t.value)))},onSubmit:function(t){if(t.preventDefault(),function(){var e={};s.mobile||(e.mobile="Mobile number is invalid.");(!s.password||s.password.length<8)&&(e.password="Password should not be less than 8 characters.");return d(e),0===Object.keys(e).length}()){p({type:"loading"});var a=Object(D.a)();s.token=a,localStorage.setItem(x.KEY_DEVICE_ID,a),function(e){var t=x.ROOT_PATH+"/public/sign-in",a={mobile:e.mobile,password:e.password,token:e.token};return N.a.post(t,a)}(s).then((function(t){"FAIL"!==t.data.result?(localStorage.setItem(x.KEY_TOKEN,t.data.token),localStorage.setItem(x.KEY_USER_ID,t.data.customerId),e.history.replace("/app")):p({type:"error",error:"Invalid login ID or password."})})).catch((function(e){var t="Something went wrong.";if(console.log(e),e.response){var a=e.response.data;t=a.errorCode?a.errorCode:a}p({type:"error",error:t})}))}},errors:o,loading:b.loading}),Object(c.jsx)("div",{className:"row mt-4",children:Object(c.jsxs)("div",{className:"mx-auto small",children:[Object(c.jsx)("span",{children:"Don't have an account?"}),Object(c.jsx)(v.b,{to:"/sign-up",className:"card-link text-primary ml-1",children:"Sign Up"})]})})]})})})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)(E,{})]})},P=a(24),Y=function(e){var t=e.component,a=Object(P.a)(e,["component"]);return Object(c.jsx)(g.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return localStorage.getItem(x.KEY_TOKEN)?Object(c.jsx)(t,Object(u.a)({},e)):Object(c.jsx)(g.a,{to:"/login"})}}))},R=a.p+"static/media/error-404-monochrome.a0894fb6.svg";var H=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"container py-4",children:Object(c.jsx)("div",{className:"row justify-content-center",children:Object(c.jsx)("div",{className:"col-lg-6",children:Object(c.jsxs)("div",{className:"text-center mt-4",children:[Object(c.jsx)("img",{className:"mb-4 img-error",width:"250",src:R,alt:"Not found"}),Object(c.jsx)("p",{className:"lead",children:"This requested URL was not found on this server."}),Object(c.jsxs)(v.b,{to:"/app",className:"card-link",children:[Object(c.jsx)(p.a,{icon:["fas","arrow-left"],className:"mr-1"})," ","Return to Home"]})]})})})}),Object(c.jsx)(E,{})]})};var K=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsx)(k,{label:"Mobile",type:"text",placeholder:"Your mobile"}),Object(c.jsx)(I,{label:"Password",placeholder:"Minimum 8 charachers"}),Object(c.jsx)(k,{label:"Name",type:"text",placeholder:"Your name"}),Object(c.jsx)("div",{className:"row mb-3",children:Object(c.jsx)("div",{className:"mx-auto small",children:Object(c.jsx)("span",{children:"Do not let others know your password."})})}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Sign Up"})]})};var V=function(){return Object(n.useEffect)((function(){document.title="VStore | Register"})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row mt-2 mb-5",children:[Object(c.jsx)("div",{className:"my-4 col-lg-7 d-none d-md-none d-lg-block",children:Object(c.jsx)(C,{})}),Object(c.jsx)("div",{className:"col-md-8 col-lg-5 my-4 mx-auto",children:Object(c.jsx)("div",{className:"card shadow border-0",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"text-center mb-3 font-weight-bold font-xl",children:"Register"}),Object(c.jsx)(K,{}),Object(c.jsx)("div",{className:"row mt-4",children:Object(c.jsxs)("div",{className:"mx-auto small",children:[Object(c.jsx)("span",{children:"Already have an account?"}),Object(c.jsx)(v.b,{to:"/login",className:"card-link text-primary ml-1",children:"Sign In"})]})})]})})})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)(E,{})]})};var M=function(e){return Object(c.jsxs)("form",{children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("div",{className:"bg-light rounded py-2 px-3",children:Object(c.jsx)("span",{className:"small",children:"Verification code will be sent to your registered mobile of your account."})})}),Object(c.jsx)(k,{label:"Mobile",type:"text",placeholder:"Your registered mobile"}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Reset Password"})]})};var F=function(){return Object(n.useEffect)((function(){document.title="VStore | Reset Password"})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsxs)("div",{className:"row mt-2 mb-5",children:[Object(c.jsx)("div",{className:"my-4 col-lg-7 d-none d-md-none d-lg-block",children:Object(c.jsx)(C,{})}),Object(c.jsx)("div",{className:"col-md-8 col-lg-5 my-4 mx-auto",children:Object(c.jsx)("div",{className:"card shadow border-0",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)(M,{}),Object(c.jsx)("div",{className:"row mt-3",children:Object(c.jsx)("div",{className:"mx-auto small",children:Object(c.jsx)(v.b,{to:"/login",className:"card-link text-primary",children:"Back to sign in"})})})]})})})]})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)(E,{})]})},L=function(e){var t=e.component,a=Object(P.a)(e,["component"]);return Object(c.jsx)(g.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){return localStorage.getItem(x.KEY_TOKEN)?Object(c.jsx)(g.a,{to:"/app"}):Object(c.jsx)(t,Object(u.a)({},e))}}))},U=a(44);function G(){var e=x.ROOT_PATH+"/private/load-stores";return N.a.get(e).then((function(e){return function(e){localStorage.setItem(x.KEY_CACHE_EXPIRY,e.expiryDate);var t=[],a=[],c=[];for(var s in e.stores){var r=e.stores[s],n=Object(u.a)({},r);for(var i in n.id=n.storeId,delete n.storeId,delete n.listingGroups,t.push(n),r.listingGroups){var l=r.listingGroups[i],o=Object(u.a)({},l);for(var d in o.id=o.listingGroupId,o.parentId=r.storeId,delete o.listingGroupId,delete o.listings,a.push(o),l.listings){var j=l.listings[d],m=Object(u.a)({},j);m.id=m.listingId,m.parentId=l.listingGroupId,delete m.listingId,c.push(m)}}}localStorage.setItem(x.KEY_CACHE_STORES,JSON.stringify(t)),localStorage.setItem(x.KEY_CACHE_CATALOGS,JSON.stringify(a)),localStorage.setItem(x.KEY_CACHE_PRODUCTS,JSON.stringify(c))}(e.data)}))}var B=function(e){var t="w-100";return e.index%2===0?t+=" mr-1":t+=" ml-1",Object(c.jsx)("a",{href:"!h",className:"text-decoration-none",onClick:e.onClick,children:Object(c.jsx)("div",{className:"row h-100",children:Object(c.jsx)("div",{className:t,children:Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm list-group-item-action h-100",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"mx-auto",children:Object(c.jsx)("img",{src:e.logo,height:"50",alt:"...",style:{maxWidth:"100px"}})})}),Object(c.jsx)("div",{className:"text-dark text-center font-weight-medium user-select-none mt-2",style:{maxWidth:"100%",wordWrap:"break-word"},children:e.title})]})})})})})};function J(){var e=Object(n.useState)({name:"...",mobile:"..."}),t=Object(O.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){var e=!1,t=window.sessionStorage.getItem(x.KEY_PROFILE);if(t){var c=Object(u.a)({},a),r=JSON.parse(t);c.name=r.name,c.mobile=r.mobile,!e&&s(c)}else(function(){var e=x.ROOT_PATH+"/private/get-my-profile";return N.a.get(e)})().then((function(t){var c=Object(u.a)({},a);c.name=t.data.name,c.mobile=t.data.mobile,window.sessionStorage.setItem(x.KEY_PROFILE,JSON.stringify(c)),!e&&s(c)})).catch((function(e){console.log(e.response.data)}));return function(){e=!0}}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h4",{className:"text-center",children:a.name}),Object(c.jsx)("div",{className:"text-center text-muted mb-3",children:a.mobile})]})}function z(){var e=Object(n.useState)(0),t=Object(O.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){var e=!1,t=window.sessionStorage.getItem(x.KEY_BALANCE);return t?isNaN(parseFloat(t))||!e&&s(parseFloat(t)):function(){var e=x.ROOT_PATH+"/private/get-balance";return N.a.get(e)}().then((function(t){window.sessionStorage.setItem(x.KEY_BALANCE,t.data.balance),!e&&s(parseFloat(t.data.balance))})).catch((function(e){console.log(e.response.data)})),function(){e=!0}}),[]),Object(c.jsxs)("h5",{className:"text-center text-success mb-0",children:[a.toLocaleString("en",{minimumFractionDigits:2})," ","VP"]})}var W=function(){var e=Object(g.g)();function t(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"list-group mb-3",children:[Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Transfer VP"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"Transfer"})]})}),Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Insufficient VP ?"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"Deposit"})]})}),Object(c.jsx)(v.b,{to:"/balance-history",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"VP Balance History"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"View"})]})}),Object(c.jsx)(v.b,{to:"/transfer-history",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"VP Transfer History"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"View"})]})})]}),Object(c.jsxs)("div",{className:"list-group mb-3",children:[Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Use Coupon Code"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"Use"})]})}),Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Redeem Voucher"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"Redeem"})]})})]})]})}return Object(c.jsxs)("div",{className:"sticky-top",style:{top:"72px",zIndex:0},children:[Object(c.jsx)("div",{className:"card border-0 shadow-cm rounded-lg mb-3",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)(J,{}),Object(c.jsx)(z,{})]})}),Object(c.jsx)("div",{className:"d-none d-lg-block",children:t()}),Object(c.jsxs)("div",{className:"d-block d-lg-none",children:[Object(c.jsxs)("ul",{className:"nav nav-pills nav-justified mb-3",role:"tablist",children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{href:"#wallet",className:"nav-link active",id:"wallet-tab","data-toggle":"tab",role:"tab","aria-controls":"wallet","aria-selected":"true",children:Object(c.jsx)(p.a,{icon:["fas","wallet"]})})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{href:"#entry",className:"nav-link",id:"entry-tab","data-toggle":"tab",role:"tab","aria-controls":"entry","aria-selected":"false",children:Object(c.jsx)("div",{style:{transform:"rotate(90deg)"},children:Object(c.jsx)(p.a,{icon:["fas","exchange-alt"]})})})}),Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("a",{href:"#setting",className:"nav-link",id:"setting-tab","data-toggle":"tab",role:"tab","aria-controls":"setting","aria-selected":"false",children:Object(c.jsx)(p.a,{icon:["fas","cog"]})})})]}),Object(c.jsxs)("div",{className:"tab-content",children:[Object(c.jsx)("div",{className:"tab-pane fade show active",id:"wallet",role:"tabpanel","aria-labelledby":"wallet-tab",children:t()}),Object(c.jsx)("div",{className:"tab-pane fade",id:"entry",role:"tabpanel","aria-labelledby":"entry-tab",children:Object(c.jsxs)("div",{className:"list-group mb-3",children:[Object(c.jsx)(v.b,{to:"/epin-history",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"E-Pin History"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"View"})]})}),Object(c.jsx)(v.b,{to:"/topup-history",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Topup History"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:"View"})]})})]})}),Object(c.jsx)("div",{className:"tab-pane fade",id:"setting",role:"tabpanel","aria-labelledby":"setting-tab",children:Object(c.jsxs)("div",{className:"list-group mb-3 d-block d-lg-none",children:[Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Change Name"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:Object(c.jsx)(p.a,{icon:["fas","pen"]})})]})}),Object(c.jsx)(v.b,{to:"/",className:"list-group-item list-group-item-action",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Change Password"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:Object(c.jsx)(p.a,{icon:["fas","pen"]})})]})}),Object(c.jsx)("a",{href:"!#",className:"list-group-item list-group-item-action",onClick:function(t){t.preventDefault(),localStorage.clear(),sessionStorage.clear(),e.push("/login")},children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col",children:"Logout"}),Object(c.jsx)("div",{className:"col-auto text-secondary",children:Object(c.jsx)(p.a,{icon:["fas","sign-out-alt"]})})]})})]})})]})]})]})};var X=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{active:e.active}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("div",{className:"row mt-3 mb-5",children:[Object(c.jsx)("div",{className:"col-lg-4 d-none d-md-none d-lg-block",children:Object(c.jsx)(W,{})}),Object(c.jsx)("div",{className:"col-md-12 col-lg-8",children:e.children})]}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{})]}),Object(c.jsx)(E,{})]})};var q=function(e){var t=Object(n.useState)({items:[],store:""}),a=Object(O.a)(t,2),s=a[0],r=a[1];function i(t,a){var c=localStorage.getItem(x.KEY_CACHE_STORES);if(c){var s=JSON.parse(c).find((function(e){return e.id===a}));if(s){var n=JSON.parse(t);n.sort((function(e,t){return e.orderIndex-t.orderIndex})),r({items:n.filter((function(e){return e.parentId===a})),store:s.title})}else e.history.push("/")}else e.history.push("/")}return Object(n.useEffect)((function(){var t=!1,a=e.match.params.store,c=localStorage.getItem(x.KEY_CACHE_EXPIRY),s=localStorage.getItem(x.KEY_CACHE_CATALOGS);return!s||Number(c)<=(new Date).getTime()?G().then((function(e){t||i(localStorage.getItem(x.KEY_CACHE_CATALOGS),a)})).catch((function(e){console.log(e.response.data)})):t||i(s,a),function(){t=!0}}),[e.match.params.store]),Object(c.jsxs)(X,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("nav",{"aria-label":"breadcrumb",children:Object(c.jsxs)("ol",{className:"breadcrumb bg-white shadow-cm",children:[Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)(v.b,{to:"/app",className:"card-link",children:"Home"})}),Object(c.jsx)("li",{className:"breadcrumb-item active",children:s.store})]})})})}),Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("div",{className:"row",children:s.items.map((function(t,a){return Object(c.jsx)("div",{className:"col-6 col-sm-6 col-md-6 mb-3",children:Object(c.jsx)(B,{id:t.id,logo:t.photoUrl,title:t.title,index:a,slug:e.match.params.store+"/"+t.id})},t.id)}))})})]})};var Q=function(e){var t="w-100";return e.index%2===0?t+=" mr-1":t+=" ml-1",Object(c.jsx)("a",{href:"!#",className:"text-decoration-none",onClick:e.onClick,children:Object(c.jsx)("div",{className:"row h-100",children:Object(c.jsx)("div",{className:t,children:Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm list-group-item-action h-100",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"mx-auto",children:Object(c.jsx)("img",{src:e.logo,height:"50",alt:"...",style:{maxWidth:"100px"}})})}),Object(c.jsx)("div",{className:"text-secondary text-center user-select-none mt-3",style:{maxWidth:"100%",wordWrap:"break-word"},children:e.title}),Object(c.jsxs)("h5",{className:"text-success font-weight-medium text-center user-select-none mt-2 mb-0",style:{maxWidth:"100%",wordWrap:"break-word"},children:[e.price," VP"]})]})})})})})};var $=function(e){var t=Object(n.useState)({items:[],store:"",catalog:""}),a=Object(O.a)(t,2),s=a[0],r=a[1];function i(t,a,c){try{var s=localStorage.getItem(x.KEY_CACHE_STORES),n=localStorage.getItem(x.KEY_CACHE_CATALOGS),i=JSON.parse(s).find((function(e){return e.id===a})),l=JSON.parse(n).find((function(e){return e.id===c}));if(!i&&!l)return void e.history.push("/app");var o=JSON.parse(t);o.sort((function(e,t){return e.orderIndex-t.orderIndex})),r({items:o.filter((function(e){return e.parentId===c})),store:i.title,catalog:l.title})}catch(d){console.log(d.message),e.history.push("/app")}}return Object(n.useEffect)((function(){var t=!1,a=e.match.params.store,c=e.match.params.catalog,s=localStorage.getItem(x.KEY_CACHE_EXPIRY),r=localStorage.getItem(x.KEY_CACHE_PRODUCTS);return!r||Number(s)<=(new Date).getTime()?G().then((function(e){t||i(localStorage.getItem(x.KEY_CACHE_PRODUCTS),a,c)})).catch((function(e){console.log(e.response.data)})):t||i(r,a,c),function(){t=!0}}),[e.match.params.store,e.match.params.catalog]),Object(c.jsxs)(X,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("nav",{"aria-label":"breadcrumb",children:Object(c.jsxs)("ol",{className:"breadcrumb bg-white shadow-cm",children:[Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)(v.b,{to:"/app",className:"card-link",children:"Home"})}),Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)(v.b,{to:"/app/"+e.match.params.store,className:"card-link",children:s.store})}),Object(c.jsx)("li",{className:"breadcrumb-item active",children:s.catalog})]})})})}),Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("div",{className:"row",children:s.items.map((function(e,t){return Object(c.jsx)("div",{className:"col-6 col-sm-6 col-md-6 mb-3",children:Object(c.jsx)(Q,{id:e.id,logo:e.photoUrl,title:e.title,index:t,price:e.sellingPrice})},e.id)}))})})]})};function Z(e,t){switch(t.type){case"loading":return{loading:!0};case"success":return{data:t.data,loading:!1};case"error":return{loading:!1,error:t.error};default:return e}}var ee=function(e){var t=Object(n.useReducer)(Z,{data:[],loading:!1}),a=Object(O.a)(t,2),s=a[0],r=a[1];function i(e){var t=new Date(e);return Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(t)}return Object(n.useEffect)((function(){var e=!1;return document.title="VStore | Notifications",r({type:"loading"}),function(){var e=x.ROOT_PATH+"/private/get-notifications";return N.a.get(e)}().then((function(t){e||r({type:"success",data:t.data})})).catch((function(t){console.log(t);var a="Something went wrong.";if(t.response){var c=t.response.data;a=c.errorCode?c.errorCode:c}!e&&r({type:"error",error:a})})),function(){e=!0}}),[]),Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsx)("span",{className:"h4 my-auto",children:"Notifications"}),Object(c.jsx)("button",{className:"btn btn-sm btn-outline-primary ",children:"Delete All"})]}),Object(c.jsx)("hr",{}),s.loading&&Object(c.jsx)("div",{className:"text-center py-4",children:Object(c.jsx)("div",{className:"spinner-border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})}),s.error&&Object(c.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[s.error,Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),s.data&&!s.data.length&&Object(c.jsx)("div",{className:"text-center text-muted",children:"No notification found."}),s.data&&s.data.map((function(e){var t="READ"===e.status?" text-muted":" font-weight-bold";return Object(c.jsx)("a",{href:"!#",className:"text-decoration-none",children:Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12 list-group-item-action",children:Object(c.jsx)("div",{className:"card-body px-0",children:Object(c.jsxs)("div",{className:"media",children:[Object(c.jsx)("div",{className:"mr-3 bg-primary rounded-circle text-white",style:{width:"46px",height:"46px"},children:Object(c.jsx)("div",{className:"d-flex align-items-center justify-content-center h-100",children:Object(c.jsx)(p.a,{icon:["fas","envelope"],size:"lg"})})}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsx)("label",{className:"my-0"+("READ"===e.status?" font-weight-medium":" font-weight-bold"),children:e.title}),Object(c.jsx)("div",{className:"mb-2 small"+t,children:i(e.notificationDate)}),Object(c.jsx)("p",{className:"card-text mb-0"+t,children:e.body})]})]})})})},e.notificationId)}))]})})})},te=a(10),ae=a.n(te);function ce(e){var t=ae()(e,"DD-MMM-YYYY");t.isValid()||(t=ae()());var a=new Date(t.year(),t.month(),t.date(),0,0,0),c=new Date(t.year(),t.month(),t.date(),23,59,59);return[a.getTime(),c.getTime()]}var se=function(e){return e.show?Object(c.jsx)("div",{className:"text-center py-4",children:Object(c.jsx)("div",{className:"spinner-border",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(c.jsx)(c.Fragment,{})};var re=function(e){return e.show?Object(c.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[e.message,Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}):Object(c.jsx)(c.Fragment,{})};function ne(e,t){var a=Object(n.useState)([]),c=Object(O.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(!1),l=Object(O.a)(i,2),o=l[0],d=l[1],j=Object(n.useState)(""),m=Object(O.a)(j,2),b=m[0],h=m[1];return Object(n.useEffect)((function(){var a=!1;return d(!0),t(e).then((function(e){a||(d(!1),r(e.data))})).catch((function(e){var t=e.response.data;console.log(t);var c=t.errorCode?t.errorCode:t;a||(d(!1),h(c))})),function(){a=!0}}),[e]),[s,o,b]}function ie(e,t){var a=Object(n.useState)(null),c=Object(O.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(!1),l=Object(O.a)(i,2),o=l[0],d=l[1],j=Object(n.useState)(""),m=Object(O.a)(j,2),b=m[0],h=m[1];return Object(n.useEffect)((function(){var a=!1;return d(!0),t(e).then((function(e){a||(d(!1),r(e.data))})).catch((function(e){var t="Something went wrong.";if(console.log(e),e.response){var c=e.response.data;t=c.errorCode?c.errorCode:c}a||(d(!1),h(t))})),function(){a=!0}}),[e]),[s,o,b]}var le=function(){var e=Object(n.useState)(ae()().format("DD-MMM-YYYY")),t=Object(O.a)(e,2),a=t[0],s=t[1],i=ne(a,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-transfer-history",a=ce(e),c=Object(O.a)(a,2),s=c[0],r=c[1];return N.a.post(t,{startDate:s,endDate:r,pageSize:1e3,offset:0})}(e)})),l=Object(O.a)(i,3),o=l[0],d=l[1],j=l[2];function m(e){var t=e.target;s(t.value)}return Object(n.useEffect)((function(){document.title="VStore | VP Transfer History";var e=r()("#datepicker").datepicker({uiLibrary:"bootstrap4",format:"dd-mmm-yyyy",maxDate:new Date,change:m});return function(){e.destroy()}}),[]),Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)("h4",{children:"VP Transfer History"}),Object(c.jsx)("hr",{}),Object(c.jsx)("form",{className:"form-row mb-3",children:Object(c.jsx)("div",{className:"col-auto",children:Object(c.jsx)("input",{id:"datepicker",type:"text",className:"form-control bg-white",defaultValue:a,readOnly:!0})})}),Object(c.jsx)(se,{show:d}),Object(c.jsx)(re,{show:j,message:j}),!d&&!j&&o&&!o.length&&Object(c.jsx)("div",{className:"text-center text-muted",children:"No data."}),!d&&!j&&o&&o.map((function(e,t){var a,s,r="SEND"===e.direction?" text-danger":" text-success";return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12",children:Object(c.jsx)("div",{className:"card-body px-0",children:Object(c.jsxs)("div",{className:"media",children:[Object(c.jsx)("span",{className:"mr-3"+r,children:(s=e.direction,"SEND"===s?Object(c.jsx)(p.a,{icon:["fas","minus-circle"],size:"lg"}):Object(c.jsx)(p.a,{icon:["fas","plus-circle"],size:"lg"}))}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsxs)("label",{className:"my-0 font-weight-medium"+r,children:["VP ",e.amount.toLocaleString("en")]}),Object(c.jsx)("label",{className:"my-0 font-weight-medium text-muted",children:e.direction})]}),Object(c.jsx)("div",{className:"mb-2 small text-muted",children:ae()(e.txnDate).format("DD-MMM-yyyy hh:mm:ss A")}),Object(c.jsx)("label",{className:"my-0 font-weight-medium",children:"SEND"===e.direction?"TO":"FROM"}),Object(c.jsx)("div",{className:"small text-muted",children:e.partnerMobile}),(a=e.notes,a?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("label",{className:"mt-2 mb-0 font-weight-medium",children:"Notes"}),Object(c.jsx)("div",{className:"small text-muted",children:a})]}):Object(c.jsx)(c.Fragment,{}))]})]})})},t)}))]})})})};var oe=function(){var e=Object(n.useState)(ae()().format("DD-MMM-YYYY")),t=Object(O.a)(e,2),a=t[0],s=t[1],i=ne(a,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-balance-history",a=ce(e),c=Object(O.a)(a,2),s=c[0],r=c[1];return N.a.post(t,{startDate:s,endDate:r,pageSize:1e3,offset:0})}(e)})),l=Object(O.a)(i,3),o=l[0],d=l[1],j=l[2];function m(e){var t=e.target;s(t.value)}return Object(n.useEffect)((function(){document.title="VStore | VP Balance History";var e=r()("#datepicker").datepicker({uiLibrary:"bootstrap4",format:"dd-mmm-yyyy",maxDate:new Date,change:m});return function(){e.destroy()}}),[]),Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)("h4",{children:"VP Balance History"}),Object(c.jsx)("hr",{}),Object(c.jsx)("form",{className:"form-row mb-3",children:Object(c.jsx)("div",{className:"col-auto",children:Object(c.jsx)("input",{id:"datepicker",type:"text",className:"form-control bg-white",defaultValue:a,readOnly:!0})})}),Object(c.jsx)(se,{show:d}),Object(c.jsx)(re,{show:j,message:j}),!d&&!j&&o&&!o.length&&Object(c.jsx)("div",{className:"text-center text-muted",children:"No data."}),!d&&!j&&o&&o.map((function(e,t){var a,s="WITHDRAW"===e.entryType?" text-danger":" text-success",r=" text-muted";switch(e.status){case"PROCESSING":r=" text-warning";break;case"SUCCESS":r=" text-success";break;case"FAIL":r=" text-danger"}return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12",children:Object(c.jsx)("div",{className:"card-body px-0",children:Object(c.jsxs)("div",{className:"media",children:[Object(c.jsx)("span",{className:"mr-3"+s,children:(a=e.entryType,"WITHDRAW"===a?Object(c.jsx)(p.a,{icon:["fas","minus-circle"],size:"lg"}):Object(c.jsx)(p.a,{icon:["fas","plus-circle"],size:"lg"}))}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(c.jsxs)("label",{className:"my-0 font-weight-medium"+s,children:["VP"," ",e.amount.toLocaleString("en",{minimumFractionDigits:2})]}),Object(c.jsx)("label",{className:"my-0 font-weight-medium"+r,children:e.status})]}),Object(c.jsx)("div",{className:"mb-2 small",children:ae()(e.txnDate).format("DD-MMM-yyyy hh:mm:ss A")}),Object(c.jsx)("p",{className:"text-muted mb-2",children:e.description}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("label",{className:"font-weight-medium mb-0",children:"P/B (VP)"})}),Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("label",{className:"font-weight-medium mb-0",children:"N/B (VP)"})}),Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("span",{className:"small",children:e.balanceBefore.toLocaleString("en",{minimumFractionDigits:2})})}),Object(c.jsx)("div",{className:"col-6",children:Object(c.jsx)("span",{className:"small"+s,children:e.balanceAfter.toLocaleString("en",{minimumFractionDigits:2})})})]})]})]})})},t)}))]})})})};var de=function(e){var t=e.data,a=" text-muted";switch(t.purchaseStatus){case"PROCESSING":a=" text-warning";break;case"SUCCESS":a=" text-success";break;case"FAIL":a=" text-danger"}return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12",children:Object(c.jsx)("div",{className:"card-body px-0",children:Object(c.jsxs)("div",{className:"media",children:[Object(c.jsx)("img",{src:t.productPhotoUrl,alt:"",className:"mr-3",width:"68"}),Object(c.jsxs)("div",{className:"media-body",children:[Object(c.jsx)("span",{className:"my-0 h5 font-weight-medium",children:t.productTitle}),Object(c.jsx)("div",{className:"mb-2 small text-muted",children:ae()(t.txnDate).format("DD-MMM-yyyy hh:mm:ss A")}),Object(c.jsx)("p",{className:"text-muted small mb-2",children:t.description}),Object(c.jsx)("label",{className:"my-0 small font-weight-medium",children:"STATUS"}),Object(c.jsx)("div",{className:"mb-2 small font-weight-medium"+a,children:t.purchaseStatus}),Object(c.jsx)("label",{className:"my-0 small font-weight-medium",children:"PAID AMOUNT"}),Object(c.jsx)("div",{className:"mb-2 text-muted small",children:t.paidAmount.toLocaleString("en",{minimumFractionDigits:2})}),Object(c.jsx)("label",{className:"my-0 small font-weight-medium",children:"PURCHASE ID"}),Object(c.jsx)("div",{className:"mb-2 text-muted small",children:t.purchaseId.replace(/\B(?=(\d{4})+(?!\d))/g,"-")}),Object(c.jsx)("label",{className:"my-0 small font-weight-medium",children:"REMARK"}),Object(c.jsx)("div",{className:"mb-2 text-muted small",children:t.remark}),Object(c.jsx)("div",{className:"clearfix",children:Object(c.jsx)(v.b,{to:e.detailRoute,className:"btn btn-sm btn-primary px-3 float-right",children:"Detail"})})]})]})})})};var je=function(e){var t=ae()(e.match.params.date,"DD-MMM-YYYY"),a=Object(n.useState)(t.isValid()?e.match.params.date:ae()().format("DD-MMM-YYYY")),s=Object(O.a)(a,2),i=s[0],l=s[1],o=ne(i,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-epin-history",a=ce(e),c=Object(O.a)(a,2),s=c[0],r=c[1];return N.a.post(t,{startDate:s,endDate:r,pageSize:1e3,offset:0})}(e)})),d=Object(O.a)(o,3),j=d[0],m=d[1],b=d[2];function h(e){var t=e.target;l(t.value)}return Object(n.useEffect)((function(){document.title="VStore | ePIN History";var e=r()("#datepicker").datepicker({uiLibrary:"bootstrap4",format:"dd-mmm-yyyy",maxDate:new Date,change:h});return function(){e&&e.destroy()}}),[e.match.params.date]),e.match.params.date&&!t.isValid()?Object(c.jsx)(g.a,{to:"/epin-history"}):Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)("h4",{children:"E-Pin History"}),Object(c.jsx)("hr",{}),Object(c.jsx)("form",{className:"form-row mb-3",children:Object(c.jsx)("div",{className:"col-auto",children:Object(c.jsx)("input",{id:"datepicker",type:"text",className:"form-control bg-white",defaultValue:i,readOnly:!0})})}),Object(c.jsx)(se,{show:m}),Object(c.jsx)(re,{show:b,message:b}),!m&&!b&&j&&!j.length&&Object(c.jsx)("div",{className:"text-center text-muted",children:"No data."}),!m&&!b&&j&&j.map((function(e){return Object(c.jsx)(de,{data:e,detailRoute:"/epin-history/detail/"+e.purchaseId+"/"+i+"?logo="+e.productPhotoUrl},e.purchaseId)}))]})})})};var me=function(e){var t=ae()(e.match.params.date,"DD-MMM-YYYY"),a=Object(n.useState)(t.isValid()?e.match.params.date:ae()().format("DD-MMM-YYYY")),s=Object(O.a)(a,2),i=s[0],l=s[1],o=ne(i,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-telecom-top-up-history",a=ce(e),c=Object(O.a)(a,2),s=c[0],r=c[1];return N.a.post(t,{startDate:s,endDate:r,pageSize:1e3,offset:0})}(e)})),d=Object(O.a)(o,3),j=d[0],m=d[1],b=d[2];function h(e){var t=e.target;l(t.value)}return Object(n.useEffect)((function(){document.title="VStore | Topup History";var e=r()("#datepicker").datepicker({uiLibrary:"bootstrap4",format:"dd-mmm-yyyy",maxDate:new Date,change:h});return function(){e&&e.destroy()}}),[e.match.params.date]),e.match.params.date&&!t.isValid()?Object(c.jsx)(g.a,{to:"/topup-history"}):Object(c.jsx)(X,{children:Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)("h4",{children:"Topup History"}),Object(c.jsx)("hr",{}),Object(c.jsx)("form",{className:"form-row mb-3",children:Object(c.jsx)("div",{className:"col-auto",children:Object(c.jsx)("input",{id:"datepicker",type:"text",className:"form-control bg-white",defaultValue:i,readOnly:!0})})}),Object(c.jsx)(se,{show:m}),Object(c.jsx)(re,{show:b,message:b}),!m&&!b&&j&&!j.length&&Object(c.jsx)("div",{className:"text-center text-muted",children:"No data."}),!m&&!b&&j&&j.map((function(e){return Object(c.jsx)(de,{data:e,detailRoute:"/topup-history/detail/"+e.purchaseId+"/"+i+"?logo="+e.productPhotoUrl},e.purchaseId)}))]})})})};var be=function(e){var t=e.marginBottom?" mb-2":"";return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("label",{className:"my-0 small font-weight-medium",children:e.label}),Object(c.jsx)("div",{className:"text-muted small"+t,children:e.value})]})};var he=function(e){return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-2 col-md-12",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"row mb-3",children:Object(c.jsx)("div",{className:"mx-auto",children:Object(c.jsx)("img",{src:e.logo,width:"70",alt:"..."})})}),Object(c.jsx)("h6",{className:"text-center mb-3",children:e.title}),Object(c.jsxs)("h5",{className:"text-center text-danger mb-0",children:["VP"," ",e.amount.toLocaleString("en",{minimumFractionDigits:2})]})]})})};var ue=function(e){var t=" text-muted";switch(e.status){case"PROCESSING":t=" text-warning";break;case"SUCCESS":t=" text-success";break;case"FAIL":t=" text-danger"}return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-2 col-md-12",children:Object(c.jsx)("div",{className:"card-body",children:Object(c.jsx)("h5",{className:"text-center my-0"+t,children:e.status})})})};var Oe=function(e){var t=e.match.params.date,a=ie(e.match.params.purchaseId,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-epin-purchase";return N.a.post(t,{purchaseId:e})}(e)})),s=Object(O.a)(a,3),r=s[0],i=s[1],l=s[2],o=new URLSearchParams(Object(g.h)().search);return Object(n.useEffect)((function(){document.title="VStore | ePIN Purchase Detail"}),[e.match.params.purchaseId]),Object(c.jsxs)(X,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("nav",{"aria-label":"breadcrumb",children:Object(c.jsxs)("ol",{className:"breadcrumb bg-white shadow-cm",children:[Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)(v.b,{to:"/epin-history/"+t,className:"card-link",children:"E-Pin History"})}),Object(c.jsx)("li",{className:"breadcrumb-item active",children:"E-Pin Purchase Detail"})]})})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)(se,{show:i}),Object(c.jsx)(re,{show:l,message:l}),!i&&!l&&r&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(he,{logo:o.get("logo"),title:r.productTitle,amount:r.paidAmount}),Object(c.jsx)(ue,{status:r.status}),Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)(be,{label:"PURCHASE ID",value:r.purchaseId.replace(/\B(?=(\d{4})+(?!\d))/g,"-"),marginBottom:!0}),Object(c.jsx)(be,{label:"ePIN/Serial key",value:r.serialKey,marginBottom:!0}),Object(c.jsx)("button",{className:"btn btn-sm btn-light mb-2 d-block px-3",children:"Copy"}),!isNaN(r.expiryDate)&&Object(c.jsx)(be,{label:"Expiry Date",value:ae()(r.expiryDate).format("DD-MMM-yyyy")})]})})]})]})})]})};var xe=function(e){var t=e.match.params.date,a=ie(e.match.params.purchaseId,(function(e){return function(e){var t=x.ROOT_PATH+"/private/get-telecom-top-up-purchase";return N.a.post(t,{purchaseId:e})}(e)})),s=Object(O.a)(a,3),r=s[0],i=s[1],l=s[2],o=new URLSearchParams(Object(g.h)().search);return Object(n.useEffect)((function(){document.title="VStore | Topup Purchase Detail"}),[e.match.params.purchaseId]),Object(c.jsxs)(X,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("nav",{"aria-label":"breadcrumb",children:Object(c.jsxs)("ol",{className:"breadcrumb bg-white shadow-cm",children:[Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)(v.b,{to:"/topup-history/"+t,className:"card-link",children:"Topup History"})}),Object(c.jsx)("li",{className:"breadcrumb-item active",children:"Topup Purchase Detail"})]})})})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col-md-12",children:[Object(c.jsx)(se,{show:i}),Object(c.jsx)(re,{show:l,message:l}),!i&&!l&&r&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(he,{logo:o.get("logo"),title:r.productTitle,amount:r.paidAmount}),Object(c.jsx)(ue,{status:r.status}),Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-3 col-md-12",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)(be,{label:"PURCHASE ID",value:r.purchaseId.replace(/\B(?=(\d{4})+(?!\d))/g,"-"),marginBottom:!0}),Object(c.jsx)(be,{label:"Recipient's Mobile",value:r.recipientMobile})]})})]})]})})]})};var pe=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(w,{}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("div",{className:"row mt-3 mb-5",children:Object(c.jsx)("div",{className:"col-md-12 col-lg-4",children:Object(c.jsx)(W,{})})}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{})]}),Object(c.jsx)(E,{})]})},ge=a(45);function ve(e){var t=x.ROOT_PATH+"/private/load-stores";return N.a.get(t,{cancelToken:e}).then((function(e){return function(e){localStorage.setItem(x.KEY_CACHE_EXPIRY,e.expiryDate);var t=[],a=[],c=[];for(var s in e.stores){var r=e.stores[s],n=Object(u.a)({},r);for(var i in n.id=n.storeId,delete n.storeId,delete n.listingGroups,t.push(n),r.listingGroups){var l=r.listingGroups[i],o=Object(u.a)({},l);for(var d in o.id=o.listingGroupId,o.parentId=r.storeId,delete o.listingGroupId,delete o.listings,a.push(o),l.listings){var j=l.listings[d],m=Object(u.a)({},j);m.id=m.listingId,m.parentId=l.listingGroupId,delete m.listingId,c.push(m)}}}localStorage.setItem(x.KEY_CACHE_STORES,JSON.stringify(t)),localStorage.setItem(x.KEY_CACHE_CATALOGS,JSON.stringify(a)),localStorage.setItem(x.KEY_CACHE_PRODUCTS,JSON.stringify(c))}(e.data)}))}var fe=function(e){var t="form-control";return e.error&&e.error.length>0&&(t+=" is-invalid"),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{className:"font-weight-bold",children:e.label}),Object(c.jsx)("textarea",{rows:"3",type:e.type,className:t,placeholder:e.placeholder,value:e.value,onChange:e.onChange,name:e.name}),e.error&&Object(c.jsx)("div",{className:"invalid-feedback",children:e.error})]})};var Ne=function(e){return Object(c.jsx)("div",{className:"card border-0 rounded-lg shadow-cm mb-2 col-md-12",children:Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("div",{className:"row mb-3",children:Object(c.jsx)("div",{className:"mx-auto",children:Object(c.jsx)("img",{src:e.logo,width:"70",alt:"..."})})}),Object(c.jsx)("h6",{className:"text-center mb-3",children:e.title}),Object(c.jsx)("h6",{className:"text-center text-muted mb-3",children:"You have to pay"}),Object(c.jsxs)("h5",{className:"text-center text-success mb-0",children:["VP ",e.amount.toLocaleString("en")]})]})})};var ye=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ne,{logo:e.data.photoUrl,title:e.data.title,amount:e.data.sellingPrice}),Object(c.jsx)("div",{className:"bg-white border-0 rounded-lg shadow-cm mb-3 col-md-12 px-4 py-3",children:Object(c.jsxs)("form",{children:[Object(c.jsx)(fe,{label:"Remark",name:"remark",type:"text",placeholder:""}),Object(c.jsx)("div",{className:"clearfix",children:Object(c.jsxs)("button",{type:"submit",className:"btn btn-success float-right",disabled:e.loading,children:[e.loading&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0"]}),"Purchase"]})})]})})]})};var we=function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ne,{logo:e.data.photoUrl,title:e.data.title,amount:e.data.sellingPrice}),Object(c.jsx)("div",{className:"bg-white border-0 rounded-lg shadow-cm mb-3 col-md-12 px-4 py-3",children:Object(c.jsxs)("form",{children:[Object(c.jsx)("div",{className:"text-muted mb-2",children:"Enter the mobile number that you want to topup."}),Object(c.jsx)(k,{label:"(+95)",name:"mobile",type:"tel",placeholder:"Recipient's mobile"}),Object(c.jsx)(fe,{label:"Remark",name:"remark",type:"text",placeholder:""}),Object(c.jsx)("div",{className:"clearfix",children:Object(c.jsxs)("button",{type:"submit",className:"btn btn-success float-right",disabled:e.loading,children:[e.loading&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"\xa0"]}),"Purchase"]})})]})})]})};var Se=function(e){var t=Object(n.useState)([]),a=Object(O.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)([]),l=Object(O.a)(i,2),o=l[0],d=l[1],j=Object(n.useState)(!1),m=Object(O.a)(j,2),b=m[0],h=m[1],u=Object(n.useState)(""),p=Object(O.a)(u,2),v=p[0],f=p[1],y=["purchase","result"];function w(){return o.length>0?o[o.length-1].key:x.KEY_CACHE_STORES}function S(e){var t=JSON.parse(e),a=o.length>0?o[o.length-1].item.id:"";t.sort((function(e,t){return e.orderIndex-t.orderIndex})),r(a?t.filter((function(e){return e.parentId===a})):t)}function E(e,t){e.preventDefault();var a=Object(ge.a)(o),c=a.length>0?a[a.length-1].key:x.KEY_CACHE_STORES,s={item:t,step:a.length};switch(c){case x.KEY_CACHE_STORES:s.key=x.KEY_CACHE_CATALOGS;break;case x.KEY_CACHE_CATALOGS:s.key=x.KEY_CACHE_PRODUCTS;break;case x.KEY_CACHE_PRODUCTS:s.key="purchase";break;case"purchase":s.key="result"}a.push(s),d(a)}function C(e,t){if(e.preventDefault(),t){var a=o.slice(0,t.step+1);d(a)}else d([])}return Object(n.useEffect)((function(){document.title="VStore";var e=N.a.CancelToken.source(),t=localStorage.getItem(x.KEY_CACHE_EXPIRY),a=w();if(["purchase","result"].includes(a));else{var c=localStorage.getItem(a);!c||Number(t)<=(new Date).getTime()?(r([]),h(!0),ve(e.token).then((function(e){h(!1),S(localStorage.getItem(a))})).catch((function(e){if(N.a.isCancel(e))console.log("Request cancelled.");else{var t="Something went wrong.";if(console.log(e),e.response){var a=e.response.data;t=a.errorCode?a.errorCode:a}h(!1),f(t)}}))):S(c)}return function(){null!=e&&e.cancel()}}),[o]),Object(c.jsxs)(X,{active:"home",children:[o.length>0&&Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("nav",{"aria-label":"breadcrumb",children:Object(c.jsxs)("ol",{className:"breadcrumb bg-white shadow-cm",children:[Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)("a",{href:"!#",className:"card-link",onClick:function(e){return C(e,null)},children:"Home"})}),function(){if(1===o.length)return Object(c.jsx)("li",{className:"breadcrumb-item active",children:o[0].item.title});var e=o[o.length-1];return Object(c.jsxs)(c.Fragment,{children:[o.slice(0,o.length-1).filter((function(e){return!y.includes(e.key)})).map((function(e,t){return Object(c.jsx)("li",{className:"breadcrumb-item",children:Object(c.jsx)("a",{href:"!#",className:"card-link",onClick:function(t){return C(t,e)},children:e.item.title})},t)})),!y.includes(e.key)&&Object(c.jsx)("li",{className:"breadcrumb-item active",children:e.item.title})]})}()]})})})}),Object(c.jsx)(se,{show:b}),Object(c.jsx)(re,{show:v,message:v}),function(){if(y.includes(w())){var e=o[o.length-1].item;switch(e.productType){case"EPIN":return Object(c.jsx)(ye,{data:e});case"TELECOM_TOPUP":return Object(c.jsx)(we,{data:e});default:return Object(c.jsx)(g.a,{to:"/"})}}return Object(c.jsx)("div",{className:"col-md-12",children:Object(c.jsx)("div",{className:"row",children:s.map((function(e,t){return"sellingPrice"in e?Object(c.jsx)("div",{className:"col-6 col-sm-6 col-md-6 mb-3",children:Object(c.jsx)(Q,{id:e.id,logo:e.photoUrl,title:e.title,index:t,price:e.sellingPrice,onClick:function(t){return E(t,e)}})},e.id):Object(c.jsx)("div",{className:"col-6 col-sm-6 col-md-6 mb-3",children:Object(c.jsx)(B,{id:e.id,logo:e.photoUrl,title:e.title,index:t,slug:e.id,onClick:function(t){return E(t,e)}})},e.id)}))})})}()]})};d.b.add(j.a,m.a,b.a);var Ee=a(79)({storeAsString:!0});N.a.defaults.transformResponse=function(e){return Ee.parse(e)},N.a.interceptors.request.use((function(e){var t={},a=localStorage.getItem(x.KEY_TOKEN),c=localStorage.getItem(x.KEY_USER_ID);return a&&c&&(t.Authorization=a,t["X-USER-ID"]=c),t["Content-Type"]="application/json",e.headers=t,e}),(function(e){return Promise.reject(e)})),N.a.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return Promise.reject(e)}));var Ce=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(U.a,{autoClose:3e3,hideProgressBar:!0}),Object(c.jsxs)(g.d,{children:[Object(c.jsx)(Y,{path:"/app/:store/:catalog",component:$}),Object(c.jsx)(Y,{path:"/app/:store",component:q}),Object(c.jsx)(Y,{path:"/app",exact:!0,component:Se}),Object(c.jsx)(Y,{path:"/notifications",exact:!0,component:ee}),Object(c.jsx)(Y,{path:"/profile",exact:!0,component:pe}),Object(c.jsx)(Y,{path:"/transfer-history",exact:!0,component:le}),Object(c.jsx)(Y,{path:"/balance-history",exact:!0,component:oe}),Object(c.jsx)(Y,{path:"/epin-history/:date",exact:!0,component:je}),Object(c.jsx)(Y,{path:"/epin-history",exact:!0,component:je}),Object(c.jsx)(Y,{path:"/topup-history/:date",exact:!0,component:me}),Object(c.jsx)(Y,{path:"/topup-history",exact:!0,component:me}),Object(c.jsx)(Y,{path:"/epin-history/detail/:purchaseId/:date",exact:!0,component:Oe}),Object(c.jsx)(Y,{path:"/topup-history/detail/:purchaseId/:date",exact:!0,component:xe}),Object(c.jsx)(L,{path:"/login",component:A}),Object(c.jsx)(L,{path:"/sign-up",component:V}),Object(c.jsx)(L,{path:"/reset-password",component:F}),Object(c.jsx)(g.a,{from:"/",to:"/app",exact:!0}),Object(c.jsx)(g.b,{component:H})]})]})};window.$=window.jQuery=r.a,a(82),o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)(Ce,{})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.ad6b638d.chunk.js.map